import{Fa as z,Ga as Z,Ha as J,Ia as Q,Ja as X,Qa as ee,oa as G,pa as O,va as W,wa as H,ya as N,za as Y}from"./chunk-GSCQOV4H.js";import{q as j}from"./chunk-YTGKFTSL.js";import{$ as f,Cb as u,Db as m,Eb as R,H as E,Ib as q,Lb as C,Mb as S,R as P,Xb as D,Za as b,Zb as I,da as M,dc as x,kb as w,oc as A,pa as K,pc as U,qa as $,qb as F,ta as B,tb as v,yb as T}from"./chunk-BU7DNSOB.js";import{a as c,b as g,h as p,i as h,j as L,k as l}from"./chunk-7SQXNNBM.js";var k=class{constructor(t){this.id=t?.id||null,this.title_ar=t?.title_ar||null,this.title_en=t?.title_en||null,this.slug=t?.slug||null,this.order=t?.order||null,this.short_description_ar=t?.short_description_ar||null,this.short_description_en=t?.short_description_en||null,this.featuredImage=t?.featuredImage||null,this.publication_date=t?.publication_date||null,this.selectedCategories=t?.selectedCategories||null,this.categories=t?.selectedCategories?.map(i=>i.value)||null}};function ae(a,t){a&1&&(u(0,"p",5),R(1,"i",6),D(2),A(3,"translate"),m()),a&2&&(b(2),I(" ",U(3,1,"All Fields it will be Required button it will not request"),`
`))}function oe(a,t){if(a&1){let i=q();u(0,"app-form",4),C("onSubmit",function(){K(i);let V=S();return $(V.createUpdateRecord(V.dialogMeta.endpoints))}),m(),F(1,ae,4,3,"p",5)}if(a&2){let i=S();v("form",i.createUpdateForm)("model",i.model)("fields",i.fields)("options",i.options)("withFormPadding",i.dialogMeta.withFormPadding)("showFormActions",i.dialogMeta.showFormActions)("showSubmitButton",i.dialogMeta.showSubmitButton)("showResetButton",i.dialogMeta.showResetButton)("buttonLabel",i.dialogMeta.submitButtonLabel)("submitBtnLoading",i.isLoading()),b(),T(i.dialogMeta.langDesc?1:-1)}}function re(a,t){a&1&&R(0,"app-spinner")}var te=(()=>{var t,i,r,ie;let s=class s extends Q{constructor(){super(...arguments);h(this,r);h(this,t);h(this,i);L(this,t,f(N)),L(this,i,f(Y)),this.currentLang=f(z).currentLanguage}ngOnInit(){this.dialogMeta=g(c({},this.dialogMeta),{endpoints:{store:"magazine/store",update:"magazine/update"}}),this.editData?(this.dialogMeta=g(c({},this.dialogMeta),{dialogTitle:this.translate.instant("Update magazine"),submitButtonLabel:this.translate.instant("Update magazine")}),this.model=new k(this.editData)):this.dialogMeta=g(c({},this.dialogMeta),{dialogTitle:this.translate.instant("Create magazine"),submitButtonLabel:this.translate.instant("Create magazine")}),this.fields=this.configureFields()}configureFields(){return[p(this,t).fieldBuilder([{key:"order",type:"floated-input-field",props:{type:"number",required:!0,label:"Order"}}]),p(this,t).fieldBuilder([{key:"slug",type:"floated-input-field",props:{label:"Slug"},hooks:{onInit:e=>e.formControl?.valueChanges.pipe(E(),P(()=>{let o=e.formControl?.value.replace(/\s+/g,"-");e.formControl?.setValue(o)}))}}]),p(this,t).fieldBuilder([{key:"publication_date",type:"date-field",props:{label:"publish time",view:"year",dateFormat:"yy"}},{key:"selectedCategories",type:"autocomplete-field",props:{placeholder:"select categories",label:"select categories",endpoint:"category/autocomplete/index",multiple:!0,labelTarget:`name_${this.currentLang()}`,fieldKey:"categories"}},{key:"categories"}]),{type:"tabs-field",fieldGroup:p(this,i).languages.map(e=>({props:{label:`(${e.value.toUpperCase()})`},fieldGroup:l(this,r,ie).call(this,e.value)}))},p(this,t).fieldBuilder([{key:"featuredImage",type:"file-field",props:{required:!this.editData,chooseLabel:"Featured featuredImage",description:"Dimensions Image 1024 px Width & 587 px Height & Format webp"}}])]}};t=new WeakMap,i=new WeakMap,r=new WeakSet,ie=function(e){return[p(this,t).fieldBuilder([{key:`title_${e}`,type:"floated-input-field",props:{label:"Title"}}]),{key:`short_description_${e}`,type:"textarea-field",props:{label:"short description"}}]},s.\u0275fac=(()=>{let e;return function(n){return(e||(e=B(s)))(n||s)}})(),s.\u0275cmp=M({type:s,selectors:[["app-magazine-dialog"]],standalone:!0,features:[w,x],decls:8,vars:4,consts:[[1,"p-3","border-bottom-1","border-300","bg-white","md:sticky","z-index-1102","top-0"],[1,"flex","align-items-center","justify-content-between","gap-2"],[1,"font-semibold","capitalize","text-lg","line-height-2","my-0"],["pButton","","pRipple","","icon","pi pi-times",1,"flex-shrink-0","p-button-text","p-button-plain","p-button-rounded","w-2rem","h-2rem",3,"click"],[3,"onSubmit","form","model","fields","options","withFormPadding","showFormActions","showSubmitButton","showResetButton","buttonLabel","submitBtnLoading"],[1,"filters-hint","px-4","py-4"],[1,"fas","fa-info-circle","text-primary"]],template:function(o,n){o&1&&(u(0,"div",0)(1,"div",1)(2,"h2",2),D(3),m(),u(4,"button",3),C("click",function(){return n.closeDialog()}),m()()(),F(5,oe,2,11),A(6,"async"),F(7,re,1,0,"app-spinner")),o&2&&(b(3),I(" ",n.dialogMeta.dialogTitle," "),b(2),T(U(6,2,n.dialogMeta.dialogData$)?5:7))},dependencies:[j,O,G,H,W,J,Z],encapsulation:2,changeDetection:0});let a=s;return a})();var ze=(()=>{var t,d;let r=class r extends X{constructor(){super(...arguments);h(this,t);this.currentLang=f(z).currentLanguage}ngOnInit(){this.dialogComponent=te,this.indexMeta=g(c({},this.indexMeta),{endpoints:{index:"magazine/index",delete:"magazine/delete"},indexTitle:l(this,t,d).call(this,"Magazines"),indexIcon:"pi pi-book",createBtnLabel:l(this,t,d).call(this,"Create Magazines"),indexTableKey:"MAGAZINE_KEY",columns:[{name:"id",title:l(this,t,d).call(this,"#ID"),searchable:!1,orderable:!0},{name:"order",title:l(this,t,d).call(this,"order"),searchable:!1,orderable:!0},{name:`title_${this.currentLang()}`,title:l(this,t,d).call(this,"title"),searchable:!0,orderable:!1},{name:"slug",title:l(this,t,d).call(this,"slug"),searchable:!0,orderable:!1},{name:"created_at",title:l(this,t,d).call(this,"created at"),searchable:!1,transform:{type:"date",filter:"MMM d, y"},orderable:!0}]})}};t=new WeakSet,d=function(_){return this.translate.instant(_)},r.\u0275fac=(()=>{let _;return function(e){return(_||(_=B(r)))(e||r)}})(),r.\u0275cmp=M({type:r,selectors:[["app-magazine"]],standalone:!0,features:[w,x],decls:1,vars:17,consts:[["paginatorPosition","both",3,"createBtnClicked","updateBtnClicked","deleteBtnClicked","isActiveChange","onLoadData","headerTitle","titleIcon","headerBtnLabel","columns","dataSource","loading","totalRecords","recordsFiltered","stateKey","indexRole","updateBtnRole","createBtnRole","deleteBtnRole","globalFilterValue","withActionsColumn","reorderableColumns","reorderableRows"]],template:function(y,e){if(y&1&&(u(0,"app-table-wrapper",0),C("createBtnClicked",function(){return e.openCreateRecordDialog()})("updateBtnClicked",function(n){return e.openUpdateRecordDialog(n)})("deleteBtnClicked",function(n){return e.deleteRecord(n)})("isActiveChange",function(n){return e.activeChange(n)})("onLoadData",function(n){return e.loadRecords(n)}),m()),y&2){let o,n;v("headerTitle",e.indexMeta.indexTitle)("titleIcon",e.indexMeta.indexIcon)("headerBtnLabel",e.indexMeta.createBtnLabel)("columns",e.indexMeta.columns)("dataSource",e.records())("loading",e.isLoading())("totalRecords",e.totalRecords())("recordsFiltered",e.recordsFiltered())("stateKey",e.indexMeta.indexTableKey)("indexRole",e.roles().index)("updateBtnRole",e.roles().update)("createBtnRole",e.roles().create)("deleteBtnRole",e.roles().delete)("globalFilterValue",e.globalFilterValue)("withActionsColumn",e.indexMeta.withActionCoulmns)("reorderableColumns",(o=e.indexMeta.reorderableColumns)!==null&&o!==void 0?o:!1)("reorderableRows",(n=e.indexMeta.reorderableRows)!==null&&n!==void 0?n:!1)}},dependencies:[ee],encapsulation:2,changeDetection:0});let a=r;return a})();export{ze as default};
